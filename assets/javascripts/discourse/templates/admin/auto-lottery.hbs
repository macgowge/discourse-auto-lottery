<div class="auto-lottery-admin">
  <h2>自动抽奖管理</h2>

  {{#if this.loading}}
    <p>加载中...</p>
  {{else if this.lotteries.length}}
    <table class="lottery-admin-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>标题</th>
          <th>奖品</th>
          <th>状态</th>
          <th>开奖时间</th>
          <th>参与人数</th>
          <th>操作</th>
        </tr>
      </thead>
      <tbody>
        {{#each this.lotteries as |lottery|}}
          <tr>
            <td>{{lottery.id}}</td>
            <td><a href="/t/{{lottery.topic_id}}">{{lottery.title}}</a></td>
            <td>{{lottery.prize_name}} (×{{lottery.prize_count}})</td>
            <td>{{lottery.status}}</td>
            <td>{{lottery.auto_draw_at}}</td>
            <td>{{lottery.total_entries}}</td>
            <td>
              {{#if (eq lottery.status "active")}}
                <button class="btn btn-danger" {{on "click" (fn this.drawNow lottery.id)}}>开奖</button>
              {{/if}}
              <button class="btn btn-outline-danger" {{on "click" (fn this.deleteLottery lottery.id)}}>删除</button>
            </td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  {{else}}
    <p>暂无抽奖记录。</p>
  {{/if}}
</div>
